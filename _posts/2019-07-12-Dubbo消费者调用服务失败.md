---
layout: post
title: Dubboæ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡å¤±è´¥
date: 2019-07-12 11:26:24 +0800
excerpt: è¿™ç¯‡åšå®¢ä»‹ç»äº†ä¸€æ¬¡ä½¿ç”¨Dubboçš„é”™è¯¯ç»å†ï¼šç”Ÿäº§è€…æœåŠ¡æ³¨å†ŒæˆåŠŸï¼Œæ¶ˆè´¹è€…æ— æ³•è°ƒç”¨
author: éœœæœˆåˆå…­
img:  timg.png # Add image post (optional)
tags: [Dubbo]
---

## Dubboæ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡å¤±è´¥

æœ€è¿‘ä¸€æ¬¡ä½¿ç”¨Dubbo+Zookeeperå‘ç°**ç”Ÿäº§è€…**å·²ç»å°†æœåŠ¡æ³¨å†Œåˆ°`zookeeper`æ³¨å†Œä¸­å¿ƒï¼Œåœ¨`Dubbo-Admin`ä¸Šéƒ½èƒ½å‘ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„è¡Œä¸ºï¼Œä½†æ¶ˆè´¹è€…æ­»æ´»éƒ½æ— æ³•è°ƒç”¨ï¼Œæœ€åå‘ç°åŸæ¥æ˜¯**è‡ªå·±ç”µè„‘ä¸Šæ²¡å…³é˜²ç«å¢™**ï¼Œå¯¼è‡´æ— æ³•è°ƒç”¨æœåŠ¡ï¼ŒçœŸæ˜¯å‘çˆ¹ã€‚ä¹‹å‰ä»¥ä¸ºåªè¦æœåŠ¡å™¨å…³é—­é˜²ç«å¢™å°±å¯ä»¥äº†ï¼Œæ²¡æƒ³åˆ°ã€‚ã€‚ã€‚åœ¨æ­¤è®°å½•ä¸€ä¸‹äº‹æƒ…ç»è¿‡ã€‚

#### Dubboçš„é…ç½®

ç”Ÿäº§è€…é…ç½®

```xml
<!-- ä½¿ç”¨dubboå‘å¸ƒæœåŠ¡ -->
<dubbo:application name="onlinemall-manager-service" />

<!--æŒ‡å®šåè®®åç§°ã€IPåœ°å€åŠç«¯å£å·ã€‚ç«¯å£å·é»˜è®¤2181ï¼Œå¯ä»¥åœ¨zookeeperå®‰è£…ç›®å½•/conf/xxx.cfgä¸­è¿›è¡Œä¿®æ”¹-->
<dubbo:registry protocol="zookeeper" address="ip address:2181" />

<!-- åœ¨30110ç«¯å£æš´éœ²æœåŠ¡ï¼Œæ¶ˆè´¹è€…å°†ä¼šé€šè¿‡è¿™ä¸ªæ¥å£è°ƒç”¨æ³¨å†Œçš„æœåŠ¡ -->
<dubbo:protocol name="dubbo" port="30110" />

<!-- ç”Ÿäº§è€…æä¾›çš„æœåŠ¡æ¥å£ -->
<dubbo:service interface="com.xwt.onlinemall.service.ItemService" ref="itemServiceImpl" />
```

æ¶ˆè´¹è€…é…ç½®

```xml
<!-- å¼•ç”¨dubboæœåŠ¡ -->
<dubbo:application name="onlinemall-web"/>

<!-- åœ¨30110ç«¯å£æš´éœ²æœåŠ¡ï¼Œæ¶ˆè´¹è€…å°†ä¼šé€šè¿‡è¿™ä¸ªæ¥å£è°ƒç”¨æ³¨å†Œçš„æœåŠ¡ -->
<dubbo:protocol name="dubbo" port="30110"/>

<!--æŒ‡å®šåè®®åç§°ã€IPåœ°å€åŠç«¯å£å·ã€‚ç«¯å£å·é»˜è®¤2181ï¼Œå¯ä»¥åœ¨zookeeperå®‰è£…ç›®å½•/conf/xxx.cfgä¸­è¿›è¡Œä¿®æ”¹-->
<dubbo:registry protocol="zookeeper" address="ip address:2181"/>

<!-- æ¶ˆè´¹è€…éœ€è¦ä½¿ç”¨çš„æœåŠ¡æ¥å£ -->
<dubbo:reference interface="com.xwt.onlinemall.service.ItemService" id="itemService" />
```

#### é”™è¯¯è¿‡ç¨‹

åˆ†åˆ«å¯åŠ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ‰€åœ¨mavenå·¥ç¨‹ï¼Œå¯åŠ¨æƒ…å†µå¦‚ä¸‹ï¼š

```
//************************ç”Ÿäº§è€…**********************************//
ä¸ƒæœˆ 12, 2019 10:26:32 ä¸Šåˆ org.apache.coyote.AbstractProtocol init
ä¿¡æ¯: Initializing ProtocolHandler ["http-bio-8080"]
ä¸ƒæœˆ 12, 2019 10:26:32 ä¸Šåˆ org.apache.catalina.core.StandardService startInternal
ä¿¡æ¯: Starting service Tomcat
ä¸ƒæœˆ 12, 2019 10:26:32 ä¸Šåˆ org.apache.catalina.core.StandardEngine startInternal
ä¿¡æ¯: Starting Servlet Engine: Apache Tomcat/7.0.47
ä¸ƒæœˆ 12, 2019 10:26:34 ä¸Šåˆ org.apache.catalina.core.ApplicationContext log
ä¿¡æ¯: No Spring WebApplicationInitializer types detected on classpath
ä¸ƒæœˆ 12, 2019 10:26:35 ä¸Šåˆ org.apache.catalina.core.ApplicationContext log
ä¿¡æ¯: Initializing Spring root WebApplicationContext
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
ä¸ƒæœˆ 12, 2019 10:27:28 ä¸Šåˆ org.apache.coyote.AbstractProtocol start
ä¿¡æ¯: Starting ProtocolHandler ["http-bio-8080"]

//************************æ¶ˆè´¹è€…**********************************//
ä¸ƒæœˆ 12, 2019 10:29:00 ä¸Šåˆ org.apache.coyote.AbstractProtocol init
ä¿¡æ¯: Initializing ProtocolHandler ["http-bio-8081"]
ä¸ƒæœˆ 12, 2019 10:29:00 ä¸Šåˆ org.apache.catalina.core.StandardService startInternal
ä¿¡æ¯: Starting service Tomcat
ä¸ƒæœˆ 12, 2019 10:29:00 ä¸Šåˆ org.apache.catalina.core.StandardEngine startInternal
ä¿¡æ¯: Starting Servlet Engine: Apache Tomcat/7.0.47
ä¸ƒæœˆ 12, 2019 10:29:02 ä¸Šåˆ org.apache.catalina.core.ApplicationContext log
ä¿¡æ¯: No Spring WebApplicationInitializer types detected on classpath
log4j:WARN No appenders could be found for logger (org.springframework.web.context.support.StandardServletEnvironment).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
ä¸ƒæœˆ 12, 2019 10:29:02 ä¸Šåˆ org.apache.catalina.core.ApplicationContext log
ä¿¡æ¯: Initializing Spring FrameworkServlet 'e3-manager'
ä¸ƒæœˆ 12, 2019 10:29:04 ä¸Šåˆ org.apache.catalina.core.ApplicationContext log
ä¸¥é‡: StandardWrapper.Throwable

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'itemController': Injection of autowired dependencies failed; 

nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.xwt.onlinemall.service.ItemService com.xwt.onlinemall.controller.ItemController.itemService; 

nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'itemService': FactoryBean threw exception on object creation; 

nested exception is java.lang.IllegalStateException: Failed to check the status of the service com.xwt.onlinemall.service.ItemService. No provider available for the service com.xwt.onlinemall.service.ItemService from the url zookeeper://218.197.194.82:2181/com.alibaba.dubbo.registry.RegistryService?anyhost=true&application=onlinemall-web&check=false&dubbo=2.5.3&interface=com.xwt.onlinemall.service.ItemService&methods=getItemById&pid=15792&revision=1.0-SNAPSHOT&side=consumer&timestamp=1562898543404 to the consumer 218.197.194.254 use dubbo version 2.5.3

```

å¯ä»¥çœ‹å‡ºç”Ÿäº§è€…å·²ç»å¯åŠ¨æˆåŠŸï¼Œè€Œæ¶ˆè´¹è€…å´æŠ¥å‡ºå¼‚å¸¸ã€‚

é€šè¿‡å¼‚å¸¸åˆ†æå¯çŸ¥

- `æ— æ³•åˆ›å»º'itemController'å¯¹è±¡ï¼Œæ³¨å…¥ä¾èµ–å¤±è´¥`
- `å±æ€§'ItemService'æ³¨å…¥å¤±è´¥`
- `åˆ›å»ºbeanå¯¹è±¡'itemService'å¤±è´¥`
- `No provider available for the service com.xwt.onlinemall.service.ItemService from the url`ã€‚æ³¨å†Œä¸­å¿ƒæ²¡æœ‰æ‰€æä¾›çš„æœåŠ¡ã€‚

äºæ˜¯æˆ‘è¿›å…¥zookeeperå®¢æˆ·ç«¯æŸ¥çœ‹æ˜¯å¦æœ‰æœåŠ¡æ³¨å†ŒæˆåŠŸï¼š

```shell
./zkCli.sh -server ip address:2181	# è¿›å…¥å®¢æˆ·ç«¯å‘½ä»¤
ls /dubbo 							# æŸ¥çœ‹æœåŠ¡æ³¨å†Œæƒ…å†µ
```

![Screenshot from 2019-07-12 10-44-18]({{site.baseurl}}/assets/img/Screenshot from 2019-07-12 10-44-18.png)

ç”±å›¾ç‰‡å¯ä»¥çœ‹å‡ºï¼ŒæœåŠ¡å·²ç»æˆåŠŸæ³¨å†Œè¿›äº†æ³¨å†Œä¸­å¿ƒï¼Œ**å› æ­¤åŸå› å°±æ˜¯æ¶ˆè´¹è€…æ— æ³•æ‰¾åˆ°æœåŠ¡**ã€‚

#### è§£å†³åŠæ³•

##### ç½‘ä¸Šç»™å‡ºçš„è§£å†³åŠæ³•

ä¸€å¼€å§‹æˆ‘åœ¨ç½‘ä¸Šæœç´¢äº†å¾ˆå¤šè§£å†³åŠæ³•ï¼Œ

- åœ¨<dubbo: >æ ‡ç­¾ä¸ŠåŠ ä¸Š`check=false`ï¼Œ
- ç«¯å£å·è®¾ç½®é”™è¯¯
- æœåŠ¡å™¨é˜²ç«å¢™æ²¡æœ‰å…³é—­

å‚è€ƒï¼šhttps://blog.csdn.net/xlgen157387/article/details/50385266

ç„¶è€Œå°†è¿™äº›éƒ½è¯•äº†ä¸€ééƒ½æ²¡èƒ½è§£å†³é—®é¢˜

##### ä¸´è¿‘å´©æºƒçš„è§£å†³åŠæ³•

- é‡å»ºå·¥ç¨‹ï¼šä»¥ä¸ºè‡ªå·±å·¥ç¨‹å»ºç«‹çš„æœ‰äº›é—®é¢˜ï¼Œåæ¥ä¸´è¿‘å´©æºƒé‡å»ºå·¥ç¨‹(ãƒï½€Ğ”)ãƒï¼ˆpsï¼šé‡æ–°å»ºç«‹å…¨éƒ¨æ¨¡å—ï¼Œåˆ æ‰GitHubä¸Šçš„repoå†é‡å»ºï¼Œç”Ÿä¸å¦‚æ­»ï¼‰ï¼Œåæ¥å‘ç°é‡å»ºå·¥ç¨‹è¿˜æ˜¯æ²¡æœ‰ç”¨ï¼ˆè¿™æ—¶æˆ‘æƒ³ç ¸ç”µè„‘äº†(â•¯â–”çš¿â–”)â•¯ï¼‰ã€‚
- è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®åŸå› ï¼Œæ¢å°è™šæ‹Ÿæœºï¼šåæ¥åˆä»¥ä¸ºæ˜¯è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®çš„åŸå› ï¼Œä¹‹å‰ç”¨çš„æ˜¯CentOS7ï¼Œè¿è¡Œåœ¨VirtualBoxä¸Šã€‚æˆ‘çš„VirtualBoxä¸Šçš„ç½‘ç»œè®¾ç½®æ€»æ˜¯å‡ºé—®é¢˜ï¼Œè™šæ‹Ÿæœºä¸Šçš„ç½‘å¡æ€»æ˜¯æ— æ³•ä½¿ç”¨ã€‚æ•…æ¢äº†å¦å¤–ä¸€å°è£…äº†Ubuntuç³»ç»Ÿçš„ç”µè„‘ã€‚è¿˜æ˜¯æ— æ³•è¿è¡Œ

##### æœ€åçš„è§£å†³åŠæ³•

æœ€åä»”ç»†ç ”ç©¶äº†ä¸‹dubbo-adminä¸­çš„ä¿¡æ¯ï¼Œå‘ç°ç”Ÿäº§è€…æˆåŠŸæ³¨å†ŒæœåŠ¡ï¼Œæ¶ˆè´¹è€…ä¹ŸæˆåŠŸæ‰¾åˆ°ç«¯å£ï¼Œè¯´æ˜ä¸å¯èƒ½æ˜¯ç«¯å£è®¾ç½®é—®é¢˜ã€‚å¹¶ä¸”æ¶ˆè´¹è€…ä¹ŸæˆåŠŸçš„æ‰¾åˆ°äº†æ³¨å†Œä¸­å¿ƒï¼Œæ˜¯æ²¡æœ‰é“ç†æ²¡èƒ½å‘ç°æ³¨å†Œçš„æœåŠ¡çš„ã€‚

![2019-07-12_111336]({{site.baseurl}}/assets/img/2019-07-12_111336.png)

![2019-07-12_111345]({{site.baseurl}}/assets/img/2019-07-12_111345.png)

æ‰€ä»¥çœŸç›¸åªæœ‰ä¸€ä¸ªï¼ˆæŸ¯å—é™„èº«ingï¼ˆï¿£ï¸¶ï¿£ï¼‰â†—ã€€ï¼‰ï¼Œæ¶ˆè´¹è€…å·²ç»æ‰¾åˆ°äº†æœåŠ¡ï¼Œå°†å…¶å–å›æ—¶è¢«é˜²ç«å¢™æ‹¦æˆªï¼ˆè¯¥é˜²ç«å¢™æ˜¯å®¢æˆ·ç«¯çš„é˜²ç«å¢™ï¼Œå½“ç„¶è¿™æ˜¯æˆ‘çŒœæƒ³çš„ï¼Œå…·ä½“åŸå› æœªçŸ¥ğŸ˜‚ï¼‰ã€‚ç„¶åæˆ‘å°è¯•äº†ä¸€ä¸‹å…³é—­å¼ºå¤§çš„McAfeeğŸ™ƒï¼Œæœ€åç»ˆäºè°ƒç”¨æˆåŠŸã€‚

#### æ€»ç»“

**ä½¿ç”¨Dubboä¸€å®šè¦åŒæ—¶å…³é—­æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„é˜²ç«å¢™ï¼ï¼ï¼**

**ä½¿ç”¨Dubboä¸€å®šè¦åŒæ—¶å…³é—­æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„é˜²ç«å¢™ï¼ï¼ï¼**

**ä½¿ç”¨Dubboä¸€å®šè¦åŒæ—¶å…³é—­æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„é˜²ç«å¢™ï¼ï¼ï¼**



> æœ¬æ–‡é¦–å‘äºæˆ‘çš„ä¸ªäººç½‘ç«™ã€[https://mrxwte.github.io](https://mrxwte.github.io/)ã€‘ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

