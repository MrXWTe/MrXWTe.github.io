---
layout: post
title: Docker学习笔记
date: 2019-07-29 14:43:24 +0800
excerpt: 这篇博客记录了Docker学习过程中的笔记
author: 霜月初六
img:  docker.png
tags: [Docker]
---



## Docker学习笔记

### Docker在CentOS7上的安装

#### 1、准备安装阶段

我们这里安装`Docker Engine - Community`，该版本是社区版（免费O(∩_∩)O）。我的Linux的版本是`CentOS Linux release 7.6.1810 (Core)`，官网上的原话是`you need a maintained version of CentOS 7. Archived versions aren’t supported or tested.(您需要CentOS 7的维护版本。不支持或测试存档版本。)`。

如果原来安装了docker，需要先卸载掉旧版本的docker，以及相关联的依赖。

```shell
sudo yum remove docker \
                docker-client \
                docker-client-latest \
                docker-common \
                docker-latest \
                docker-latest-logrotate \
                docker-logrotate \
                docker-engine
```

#### 2、安装dockerEC

在安装docker之前，需要先设置docker存储库（`Docker repository`），之后，可以从该仓库安装和更新docker。

##### 安装需要的包

`yum-utils`提供`yum-config-manager`实用程序，`devicemapper`存储驱动程序需要`device-mapper-persistent-data`和`lvm2`。

```shell
sudo yum install -y yum-utils \
device-mapper-persistent-data \
lvm2
```

然后执行下面的命令设置稳定的存储库

```shell
sudo yum-config-manager \
--add-repo \
https://download.docker.com/linux/centos/docker-ce.repo
```

##### 激活夜间或测试存储库（可选）

夜间/测试存储库包含在`docker.repo`文件中，但默认是关闭的。您可以在激活稳定存储库的同时激活他们。下面的命令是用来激活夜间存储库的。

```shell
sudo yum-config-manager --enable docker-ce-nightly	# 激活夜间存储库
sudo yum-config-manager --enable docker-ce-test		# 激活测试通道
sudo yum-config-manager --disable docker-ce-nightly	# 关闭夜间存储库
```

##### 安装DockerEC

您可以通过以下命令安装最近版本的`Docker Engine - Community`

```shell
sudo yum install docker-ce docker-ce-cli containerd.io
```

如果在安装的过程中提示您验证GPG key，您可以对比以下密钥：`060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35`，如果相匹配的话，选择yes。如下图所示：

![2019-07-29_143553](E:\Personal Blog\MrXWTe.github.io\assets\img\2019-07-29_143553.png)

